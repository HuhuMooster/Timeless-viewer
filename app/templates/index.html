{% extends "base.html" %}

{% block content %}
    <form method="POST" action="/search">
        <link   rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-darkness/jquery-ui.min.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
        <select name="name">
            <option value="brutal restraint">Brutal Restraint</option>
            <option value="elegant hubris">Elegant Hubris</option>
            <option value="glorious vanity">Glorious Vanity</option>
            <option value="lethal pride">Lethal Pride</option>
            <option value="militant faith">Militant Faith</option>
        </select>
        <input type="text" name="seeds" placeholder="Seeds (comma separated)">
        <input type="text" name="socketIDs" placeholder="Socket IDs (comma separated)">
        <input type="number" name="latest" placeholder="Last n jewels"><br/><br/>
        <div id="affixes">
            <input type="text" id="autocomplete" placeholder="Affix name" class="affix" name="affixes">
            <input type="number" placeholder="Minimum threshold" name="thresholds"><br/>
        </div><br/>
        <button id="add_affix" type="button">Add affix</button><br/><br/>
        <input type="submit" value="Search">
        <script type="text/javascript">
            function setAutocomplete() {
                let autocompleteList = [
                    "#% increased Fire Damage",
                    "#% increased Cold Damage",
                    "#% increased Lightning Damage",
                    "#% increased Physical Damage",
                    "#% increased Chaos Damage",
                    "#% increased Attack Damage",
                    "#% increased Spell Damage",
                    "#% increased Area Damage",
                    "#% increased Projectile Damage",
                    "#% increased Damage over Time",
                    "#% increased Area of Effect",
                    "#% increased Projectile Speed",
                    "#% increased Critical Strike Chance",
                    "#% increased Attack Speed",
                    "#% increased Cast Speed",
                    "#% increased Movement Speed",
                    "#% chance to Ignite",
                    "#% chance to Freeze",
                    "#% chance to Shock",
                    "#% increased Skill Effect Duration",
                    "#% increased maximum Life",
                    "#% increased maximum Mana",
                    "#% increased Mana Regeneration Rate",
                    "#% increased Armour",
                    "#% increased Evasion Rating",
                    "#% increased maximum Energy Shield",
                    "#% Chance to Block Spell Damage",
                    "#% chance to Dodge Attack Hits",
                    "#% chance to Dodge Spell Hits",
                    "#% increased Effect of Non-Curse Auras from your Skills",
                    "#% increased Effect of your Curses",
                    "#% of Fire Damage Leeched as Life",
                    "#% of Physical Damage Converted to Fire Damage",
                    "#% of Cold Damage Leeched as Life",
                    "#% of Physical Damage Converted to Cold Damage",
                    "#% of Lightning Damage Leeched as Life",
                    "#% of Physical Damage Converted to Lightning Damage",
                    "#% chance to deal Double Damage",
                    "#% of Physical Damage Leeched as Life",
                    "#% chance to inflict Withered for 2 seconds on Hit",
                    "#% of Chaos Damage Leeched as Life",
                    "#% increased Critical Strike Chance for Spells",
                    "#% of Life Regenerated per second",
                    "#% of Attack Damage Leeched as Life",
                    "#% additional Physical Damage Reduction",
                    "#% chance to Blind enemies on hit",
                    "#% increased Energy Shield Recharge rate",
                    "#% of Spell Damage Leeched as Energy Shield",
                    "#% increased Defences from Equipped Shield",
                    "#% chance to Avoid being Stunned",
                    "#% increased Area of Effect of Aura Skills",
                    "#% of Physical Damage Converted to Fire Damage while you have at least 150 Devotion",
                    "#% of Physical Damage Converted to Cold Damage while you have at least 150 Devotion",
                    "#% of Physical Damage Converted to Lightning Damage while you have at least 150 Devotion",
                    "#% additional Physical Damage Reduction while you have at least 150 Devotion",
                    "#% chance to inflict Fire Exposure on Hit if you have at least 150 Devotion",
                    "#% chance to inflict Cold Exposure on Hit if you have at least 150 Devotion",
                    "#% chance to inflict Lightning Exposure on Hit if you have at least 150 Devotion",
                    "#% increased Armour per Endurance Charge",
                    "#% increased Damage per Endurance Charge",
                    "#% chance to gain a Frenzy Charge on Hit",
                    "#% increased Evasion Rating per Frenzy Charge",
                    "#% increased Damage per Frenzy Charge",
                    "#% chance to gain a Power Charge on Critical Strike",
                    "#% increased Energy Shield per Power Charge",
                    "#% increased Damage per Power Charge",
                    "#% increased Effect of Chill",
                    "#% chance to Avoid being Chilled",
                    "#% increased Effect of Shock",
                    "#% chance to Avoid being Shocked",
                    "#% increased Fire Damage with Attack Skills",
                    "#% increased Cold Damage with Attack Skills",
                    "#% increased Lightning Damage with Attack Skills",
                    "#% increased Melee Physical Damage",
                    "#% increased Damage with Bleeding",
                    "#% increased Projectile Attack Damage",
                    "#% increased Rarity of Items found",
                    "#% increased Global Accuracy Rating",
                    "#% increased Flask Effect Duration",
                    "#% increased Strength",
                    "#% increased Effect of Fortify on you",
                    "#% increased Melee Damage",
                    "#% increased Melee Critical Strike Chance",
                    "#% increased Burning Damage",
                    "#% increased Totem Damage",
                    "#% increased Warcry Buff Effect",
                    "#% increased Totem Placement speed",
                    "#% increased Stun Duration on Enemies",
                    "#% reduced Enemy Stun Threshold",
                    "#% of Physical Damage from Hits taken as Fire Damage",
                    "#% chance to gain an Endurance Charge on Kill",
                    "#% chance to Intimidate Enemies for 4 seconds on Hit",
                    "#% increased Dexterity",
                    "#% increased Flask Charges gained",
                    "#% increased Attack and Cast Speed",
                    "#% increased Damage with Poison",
                    "#% increased Elemental Damage",
                    "#% increased Duration of Elemental Ailments on Enemies",
                    "#% increased Effect of non-Damaging Ailments on Enemies",
                    "#% increased Effect of Flasks on you",
                    "#% chance to gain a Frenzy Charge on Kill",
                    "+#% to Critical Strike Multiplier",
                    "+#% to Melee Critical Strike Multiplier",
                    "+#% Chance to Block Attack Damage",
                    "+#% to Fire Resistance",
                    "+#% to Cold Resistance",
                    "+#% to Lightning Resistance",
                    "+#% to Chaos Resistance",
                    "+#% to maximum Cold Resistance",
                    "+#% to maximum Lightning Resistance",
                    "+#% to maximum Chaos Resistance",
                    "+#% to maximum Fire Resistance",
                    "+#% to all maximum Resistances if you have at least 150 Devotion",
                    "+# Life gained when you Block",
                    "+#% to all Elemental Resistances",
                    "+# to Minimum Endurance Charges while you have at least 150 Devotion",
                    "+# to Minimum Power Charges while you have at least 150 Devotion",
                    "+# to Minimum Frenzy Charges while you have at least 150 Devotion",
                    "+# to Strength",
                    "+# to Dexterity",
                    "Damage Penetrates #% Fire Resistance",
                    "Damage Penetrates #% Cold Resistance",
                    "Damage Penetrates #% Lightning Resistance",
                    "Curse Skills have #% increased Skill Effect Duration",
                    "Gain #% of Maximum Mana as Extra Maximum Energy Shield while you have at least 150 Devotion",
                    "Gain Arcane Surge on Hit with Spells if you have at least 150 Devotion",
                    "Gain an Endurance Charge every second if you've been Hit Recently",
                    "Immune to Elemental Ailments while on Consecrated Ground if you have at least 150 Devotion",
                    "You take #% reduced Extra Damage from Critical Strikes",
                    "Minions deal #% increased Damage",
                    "Minions have #% increased Movement Speed",
                    "Minions have #% increased maximum Life",
                    "Bleeding you inflict deals Damage #% faster",
                    "Poisons you inflict deal Damage #% faster",
                    "Ignites you inflict deal Damage #% faster",
                    "Gain #% of Physical Damage as Extra Fire Damage",
                    "Gain #% of Physical Damage as Extra Cold Damage",
                    "You gain Onslaught for 8 seconds on Kill"
                ];
                $('input.affix').each(function() {
                    $(this).autocomplete({
                        source: autocompleteList,
                        minLength: 2
                    });
                });
            }
            setAutocomplete();
            $(document).ready(function(){
                var count_item = 0;
                $("#add_affix").on("click", function(){
                    count_item += 1;
                    $('<input type="text" id="autocomplete" placeholder="Affix name" class="affix" autocomplete="off" name="affixes">&nbsp;</input>').appendTo("#affixes");
                    $('<input type="number" placeholder="Minimum threshold" name="thresholds"></input><br/>').appendTo("#affixes");
                    setAutocomplete();
                });
            });
        </script>
    </form>    
    <hr>
    {% for jewel in jewels %}
    <div class="wrapper">
        <p class="jewel">{{ jewel.name }} #{{ jewel.seed }} {{ jewel.variation }} socketed at {{ jewel.socket_id }} ({{ jewel.created }}):</p>
        <div class="first">
            <p>Added nodes:</p>
            {% for node in jewel.added_nodes %}
            <li>{{ node }}</li>
            {% endfor %}
        </div>
        <div class="second">
            <p>Summed mods:</p>
            {% for mod, val in jewel.summed.items() %}
            <li>{{ mod }}: {{ val }}</li>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
{% endblock %}